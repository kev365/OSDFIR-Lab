graph TD
    A[Start OSDFIR Lab Deployment] --> B{Prerequisites Check}
    B -->|Missing Tools| C[Install Docker Desktop<br/>Minikube, kubectl<br/>Terraform, Helm]
    B -->|All Present| D[Run Management Script<br/>manage-osdfir.ps1 deploy]
    C --> D
    
    D --> E[Start Minikube Cluster<br/>scripts/start-minikube.ps1 -deploy]
    E --> F[Apply Terraform Config<br/>terraform apply -auto-approve]
    F --> G[Deploy OSDFIR Helm Charts<br/>Timesketch + OpenRelik]
    G --> H[Deploy Ollama AI Service<br/>manifests/ollama-deployment.yaml]
    
    H --> I{Model Download Status}
    I -->|In Progress| J[Wait for AI Model Download<br/>ai/gemma3n:4B-Q4_K_M (~2.5GB)]
    J --> K[Model Downloaded<br/>Ollama Service Ready]
    I -->|Complete| K
    
    K --> L[Configure OpenRelik AI Integration<br/>Environment Variables Set]
    L --> M[Start Port Forwarding<br/>Background Jobs Created]
    M --> N[OSDFIR Lab Ready]
    
    N --> O{Access Services}
    O --> P[Timesketch UI<br/>http://localhost:5000]
    O --> Q[OpenRelik UI<br/>http://localhost:8711]
    O --> R[OpenRelik API<br/>http://localhost:8710]
    O --> S[AI Model Testing<br/>manage-osdfir.ps1 ollama]
    
    P --> T[Digital Forensics Timeline Analysis]
    Q --> U[Evidence Processing Pipeline]
    R --> V[API-Based Analysis]
    S --> W[AI-Assisted Evidence Analysis<br/>Using Gemma 3N Model]
    
    T --> X[Investigation Results]
    U --> X
    V --> X
    W --> X
    
    X --> Y{Continue Investigation}
    Y -->|Yes| Z[Process More Evidence]
    Y -->|No| AA[Export Results<br/>Generate Reports]
    
    Z --> U
    AA --> BB[Cleanup Environment<br/>manage-osdfir.ps1 undeploy]
    
    subgraph "AI Integration Features"
        W1[Automated Evidence Correlation]
        W2[Forensic Artifact Analysis]
        W3[Timeline Pattern Detection]
        W4[IOC Identification]
        W --> W1
        W --> W2
        W --> W3
        W --> W4
    end
    
    subgraph "Management Operations"
        M1[Check Status<br/>manage-osdfir.ps1 status]
        M2[View Logs<br/>manage-osdfir.ps1 logs]
        M3[Get Credentials<br/>manage-osdfir.ps1 creds]
        M4[Monitor AI<br/>manage-osdfir.ps1 ollama]
        N --> M1
        N --> M2
        N --> M3
        N --> M4
    end
    
    subgraph "Storage Management"
        S1[Shared PVC: osdfirvolume<br/>Evidence Storage]
        S2[Ollama Model Cache<br/>AI Model Storage]
        G --> S1
        H --> S2
    end 